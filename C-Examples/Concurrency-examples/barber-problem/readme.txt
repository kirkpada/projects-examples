This is the barbershop concurrency problem.
